<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: partials/postComponent/containers/PostComponent.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: partials/postComponent/containers/PostComponent.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useEffect, useState } from 'react';
import AudioPost from './AudioPost';
import ImageList from './ImageList';
import OptionsButton from './OptionsButton.svg';
import TextPost from './TextPost';
import Tags from './Tags';
import VideoPost from './VideoPost';
import Footer from './Footer';
import Divider from './Divider';
import Modal from '../../Modal';
import AuthBtn from '../../AuthBtn';
import { extractPostContent, copyLink, chaneMobileView } from '../Controller';
import { follow, unfollow, block } from '../Services';
import PropTypes from 'prop-types';

/**
 * @function PostComponent
 * @description Base Unit Component for all post compoennt types
 * @param {object} post - object containg post data response received from server
 * @param {boolean} isFollowed - boolean used to determine if user is following the post author
 * @param {string} userBlogName - blog name of the user who is logged in
 * @param {boolean} radar - boolean used to determine if the post viewed in radar section or not
 * @returns {Component} PostComponent
 */

PostComponent.propTypes = {
    post: PropTypes.object.isRequired,
    isFollowed: PropTypes.bool.isRequired,
    userBlogName: PropTypes.string.isRequired,
    radar: PropTypes.bool
};

export default function PostComponent(props) {
    const { post, isFollowed, userBlogName, radar } = props;

    const [isOptionListOpen, setIsOptionListOpen] = useState(false);
    const [following, setFollowing] = useState(isFollowed);
    const [isModalOpen, setIsModalOpen] = useState(false);
    const [isMsgModalOpen, setIsMsgModalOpen] = useState(false);
    const [mobileView, setMobileView] = useState(false);
    const {
        blogName,
        blogEmail,
        blogUrl,
        postTime,
        tagsArray,
        content,
        postLink,
        blogIdentifier,
        avatar,
        numberNotes,
        reblogKey,
        postId
    } = post;

    useEffect(() => {
        chaneMobileView(setMobileView);
    }, []);

    let { textPost, imagePost, videoPost, audioPost } =
        extractPostContent(content);
    window.addEventListener('resize', () => chaneMobileView(setMobileView));

    return (
        &lt;div className="post-wrapper">
            {isMsgModalOpen &amp;&amp; (
                &lt;Modal messageHeading={`${blogName} has been blocked`}>
                    &lt;AuthBtn
                        id="nevermind-btn"
                        text="close"
                        color="rgb(0,184,255)"
                        handleClick={() => {
                            setIsMsgModalOpen(false);
                            setIsOptionListOpen(false);
                        }}
                    />
                &lt;/Modal>
            )}
            {isModalOpen &amp;&amp; (
                &lt;Modal
                    messageHeading={` Are you sure you want to block ${blogName} from 
                ${userBlogName}?`}
                    messageDesc={`They won't be able to follow ${blogName}, send
                        ${blogName} messages, see ${blogName} in search
                        results, or interact with any of ${blogName}'s
                        posts.`}
                >
                    &lt;AuthBtn
                        id="nevermind-btn"
                        text="Nevermind"
                        color="rgba(255,255,255,.65)"
                        handleClick={() => {
                            setIsModalOpen(false);
                            setIsOptionListOpen(false);
                        }}
                    />
                    &lt;AuthBtn
                        id="block-btn"
                        text="Block"
                        color="rgb(255, 73, 47)"
                        handleClick={() => {
                            block(
                                blogIdentifier,
                                setIsOptionListOpen,
                                setIsModalOpen,
                                setIsMsgModalOpen
                            );
                        }}
                    />
                &lt;/Modal>
            )}

            &lt;article className="post-container">
                {!radar &amp;&amp; !mobileView &amp;&amp; (
                    &lt;div className="author-avatar">
                        &lt;div className="sticky-avatar">
                            &lt;img src={avatar} className="avatar-img" />
                        &lt;/div>
                    &lt;/div>
                )}
                &lt;header className="post-header">
                    {(mobileView || radar) &amp;&amp; (
                        &lt;div className="author-avatar mob">
                            &lt;div className="sticky-avatar mob">
                                &lt;img src={avatar} className="avatar-img mob" />
                            &lt;/div>
                        &lt;/div>
                    )}
                    &lt;div className="header-flex">
                        &lt;div className="header-title">
                            &lt;span className="post-heading">{blogName}&lt;/span>
                            {!following &amp;&amp; (
                                &lt;button
                                    onClick={() =>
                                        follow(blogUrl, blogEmail, setFollowing)
                                    }
                                    className="follow-btn"
                                >
                                    Follow
                                &lt;/button>
                            )}
                        &lt;/div>
                        &lt;div className="options-btn">
                            &lt;button
                                onClick={() => {
                                    setIsOptionListOpen(!isOptionListOpen);
                                }}
                                className="btn"
                            >
                                &lt;OptionsButton />
                            &lt;/button>
                            {isOptionListOpen &amp;&amp; (
                                &lt;div className="options">
                                    &lt;div className="list">
                                        &lt;a
                                            target="_blank"
                                            rel="noreferrer"
                                            className="post-time"
                                        >
                                            &lt;span className="post-time-text">
                                                Posted - {postTime}
                                            &lt;/span>
                                        &lt;/a>
                                        {userBlogName !== blogName &amp;&amp; (
                                            &lt;>
                                                &lt;div
                                                    onClick={() =>
                                                        copyLink(
                                                            postLink,
                                                            postId
                                                        )
                                                    }
                                                    className="opt-btn copy-btn"
                                                    id={`copy-btn${postId}`}
                                                >
                                                    Copy Link
                                                &lt;/div>
                                                {following &amp;&amp; (
                                                    &lt;div
                                                        onClick={() =>
                                                            unfollow(
                                                                blogUrl,
                                                                setFollowing,
                                                                setIsOptionListOpen
                                                            )
                                                        }
                                                        className="opt-btn follow-btn"
                                                    >
                                                        Unfollow
                                                    &lt;/div>
                                                )}
                                                &lt;div className="opt-btn report-btn">
                                                    Report
                                                &lt;/div>
                                                &lt;div
                                                    onClick={() =>
                                                        setIsModalOpen(true)
                                                    }
                                                    className="opt-btn block-btn"
                                                >
                                                    Block
                                                &lt;/div>
                                                &lt;div
                                                    onClick={() => {
                                                        setIsOptionListOpen(
                                                            false
                                                        );
                                                    }}
                                                    className="opt-btn close-btn"
                                                >
                                                    Close
                                                &lt;/div>
                                            &lt;/>
                                        )}
                                        {/**Post's author is logged user */}
                                        {userBlogName === blogName &amp;&amp; (
                                            &lt;>
                                                {' '}
                                                &lt;div className="opt-btn pin-btn">
                                                    Pin
                                                &lt;/div>
                                                &lt;div
                                                    onClick={() =>
                                                        copyLink(
                                                            postLink,
                                                            postId
                                                        )
                                                    }
                                                    className="opt-btn copy-btn"
                                                    id={`copy-btn${postId}`}
                                                >
                                                    Copy Link
                                                &lt;/div>
                                                &lt;div
                                                    onClick={() => {
                                                        setIsOptionListOpen(
                                                            false
                                                        );
                                                    }}
                                                    className="opt-btn close-btn"
                                                >
                                                    Close
                                                &lt;/div>
                                            &lt;/>
                                        )}
                                    &lt;/div>
                                &lt;/div>
                            )}
                        &lt;/div>
                    &lt;/div>
                &lt;/header>
                {textPost !== undefined &amp;&amp; (
                    &lt;>
                        &lt;TextPost
                            title={textPost.postTitle}
                            text={textPost.postText}
                        />
                        &lt;Divider />
                    &lt;/>
                )}
                {imagePost !== undefined &amp;&amp; (
                    &lt;>
                        &lt;ImageList
                            imageTag={imagePost.imageTag}
                            caption={imagePost.caption}
                            altText={imagePost.altText}
                            postId={postId}
                        />
                        &lt;Divider />
                    &lt;/>
                )}
                {audioPost !== undefined &amp;&amp; (
                    &lt;>
                        &lt;AudioPost
                            url={audioPost.url}
                            artist={audioPost.artist}
                            track={audioPost.track}
                            description={audioPost.description}
                        />
                        &lt;Divider />
                    &lt;/>
                )}
                {videoPost !== undefined &amp;&amp; (
                    &lt;>
                        &lt;VideoPost
                            id={postId + videoPost.videoTag}
                            videoTag={videoPost.videoTag}
                        />
                    &lt;/>
                )}
                {/* todo:Link Post */}
                &lt;div className="post-footer">
                    &lt;Tags tagsArray={tagsArray} />
                    &lt;Footer
                        isAuthor={userBlogName === blogName}
                        postLink={postLink}
                        numberNotes={numberNotes}
                        reblogKey={reblogKey}
                        postId={postId}
                    />
                &lt;/div>
            &lt;/article>
        &lt;/div>
    );
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#AudioPost">AudioPost</a></li><li><a href="global.html#AuthAlert">AuthAlert</a></li><li><a href="global.html#AuthBtn">AuthBtn</a></li><li><a href="global.html#AuthFooter">AuthFooter</a></li><li><a href="global.html#AuthInput">AuthInput</a></li><li><a href="global.html#CircledSideNavbar">CircledSideNavbar</a></li><li><a href="global.html#Footer">Footer</a></li><li><a href="global.html#ForgetPassword">ForgetPassword</a></li><li><a href="global.html#HomeButtons">HomeButtons</a></li><li><a href="global.html#HomeFooter">HomeFooter</a></li><li><a href="global.html#HomeSectionFive">HomeSectionFive</a></li><li><a href="global.html#HomeSectionOne">HomeSectionOne</a></li><li><a href="global.html#HomeSectionThree">HomeSectionThree</a></li><li><a href="global.html#HomeSectionTwo">HomeSectionTwo</a></li><li><a href="global.html#ImagePost">ImagePost</a></li><li><a href="global.html#LoginCard">LoginCard</a></li><li><a href="global.html#LoginView">LoginView</a></li><li><a href="global.html#Modal">Modal</a></li><li><a href="global.html#Navbar">Navbar</a></li><li><a href="global.html#NavbarAuthLinks">NavbarAuthLinks</a></li><li><a href="global.html#NavbarLinks">NavbarLinks</a></li><li><a href="global.html#NavbarMenuMobile">NavbarMenuMobile</a></li><li><a href="global.html#NavbarSearchBar">NavbarSearchBar</a></li><li><a href="global.html#NavbarSection1">NavbarSection1</a></li><li><a href="global.html#NavbarUnAuthLinks">NavbarUnAuthLinks</a></li><li><a href="global.html#PlaystoreApplestore">PlaystoreApplestore</a></li><li><a href="global.html#PostComponent">PostComponent</a></li><li><a href="global.html#PostsComponentView">PostsComponentView</a></li><li><a href="global.html#PostTypeComponent">PostTypeComponent</a></li><li><a href="global.html#Register">Register</a></li><li><a href="global.html#RegisterCard">RegisterCard</a></li><li><a href="global.html#RegisterStepOne">RegisterStepOne</a></li><li><a href="global.html#RegisterStepTwo">RegisterStepTwo</a></li><li><a href="global.html#ResetPassword">ResetPassword</a></li><li><a href="global.html#Shortcut">Shortcut</a></li><li><a href="global.html#ShortcutGroup">ShortcutGroup</a></li><li><a href="global.html#ShortcutsContainer">ShortcutsContainer</a></li><li><a href="global.html#ShortcutsPageOverlay">ShortcutsPageOverlay</a></li><li><a href="global.html#TextPost">TextPost</a></li><li><a href="global.html#ThemeToggle">ThemeToggle</a></li><li><a href="global.html#VideoPost">VideoPost</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Wed Dec 08 2021 17:49:06 GMT+0200 (Eastern European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
